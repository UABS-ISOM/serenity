{"version":3,"sources":["../../src/pages/buddychat/buddychat.module.ts","../../src/pages/buddychat/buddychat.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { IonicPageModule } from \"ionic-angular\";\nimport { BuddychatPage } from \"./buddychat\";\n\n@NgModule({\n  declarations: [BuddychatPage],\n  imports: [IonicPageModule.forChild(BuddychatPage)]\n})\nexport class BuddychatPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/buddychat/buddychat.module.ts","import { Component, ViewChild, NgZone } from \"@angular/core\";\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  Events,\n  Content,\n  AlertController,\n} from \"ionic-angular\";\nimport { ChatProvider } from \"../../providers/chat/chat\";\nimport firebase from \"firebase\";\nimport { UserProvider } from \"../../providers/user/user\";\n/**\n * Generated class for the BuddychatPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: \"page-buddychat\",\n  templateUrl: \"buddychat.html\",\n})\nexport class BuddychatPage {\n  @ViewChild(\"content\") content: Content;\n  buddy: any;\n  newmessage;\n  allmessages = [];\n  senderavatar;\n  receiveravatar;\n  tolerance;\n  toxicflag = false;\n  toxic = true;\n  flag = true;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public chatservice: ChatProvider,\n    public events: Events,\n    public userservice: UserProvider,\n    public zone: NgZone,\n    public alertCtrl: AlertController\n  ) {\n    this.userservice.getuserdetails().then((res: any) => {\n      this.tolerance = res.tolerance;\n    });\n    this.buddy = this.chatservice.buddy;\n    this.receiveravatar = this.buddy.photoURL;\n    this.scrollto();\n    this.events.subscribe(\"newmessage\", () => {\n      this.allmessages = [];\n      this.zone.run(() => {\n        this.allmessages = this.chatservice.buddymessages;\n        for (var msg in this.allmessages) {\n          if (this.allmessages[msg].toxicity >= this.tolerance && this.flag) {\n            this.flag = false;\n            let toxicalert = this.alertCtrl.create({\n              title: \"Toxic Content Detected\",\n              subTitle:\n                \"Message contains toxic content, do you want it to be hidden?\",\n              buttons: [\n                {\n                  text: \"Yes\",\n                  role: \"cancel\",\n                  handler: () => {\n                    this.toxic = true;\n                  },\n                },\n                {\n                  text: \"No\",\n                  handler: () => {\n                    this.toxic = false;\n                  },\n                },\n              ],\n            });\n            toxicalert.present();\n          }\n        }\n      });\n    });\n  }\n\n  ionViewWillEnter() {\n    this.loaduserdetails();\n  }\n\n  loaduserdetails() {\n    this.userservice.getuserdetails().then((res: any) => {\n      this.zone.run(() => {\n        this.senderavatar = res.photoURL;\n      });\n    });\n  }\n\n  addmessage() {\n    this.chatservice.addnewmessage(this.newmessage, this.tolerance).then(() => {\n      this.content.scrollToBottom();\n      this.newmessage = \"\";\n    });\n  }\n\n  showtoxic() {\n    if (!this.toxicflag) {\n      this.toxicflag = true;\n    } else {\n      this.toxicflag = false;\n    }\n  }\n\n  ionViewDidEnter() {\n    this.chatservice.getbuddymessages();\n  }\n\n  scrollto() {\n    setTimeout(() => {\n      this.content.scrollToBottom();\n    }, 1000);\n  }\n\n  buddyprofile() {\n    this.navCtrl.push(\"BuddyprofilePage\");\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/buddychat/buddychat.ts"],"sourceRoot":""}